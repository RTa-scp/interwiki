<html>
  <head>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style type="text/css" id="internal-style"></style>
    <style type="text/css" id="custom-style"></style>

    <!-- Branches' info -->
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/gh/scpwiki/interwiki@main/js/branches-info-scp.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/gh/scpwiki/interwiki@main/js/branches-info-wl.js"
    ></script>

    <!-- PageLookupQModule -->
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/gh/scpwiki/interwiki@main/js/getWikiModule.js"
    ></script>

    <!-- C-take's resizing iframe method -->
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/gh/scpwiki/interwiki@main/js/createResizeIframe.js"
    ></script>

    <!-- Main script -->
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/gh/scpwiki/interwiki@main/js/interwiki.js"
    ></script>
  </head>

  <body>
    <div class="side-block" style="display: none">
      <div class="heading"></div>
    </div>

    <script type="text/javascript">
      // Get the current category of the page from the URL, if provided
      var pageCategory = getQueryString("category");

      // Get the list of branches. The category being set to 'wanderers'
      // indicates that the interwiki is being used for the Wanderers'
      // Library; otherwise, assume it is being used for SCP.
      var branches =
        pageCategory == "wanderers" || pageCategory == "wanderers-adult"
          ? wlBranches
          : scpBranches;
      var branchIds = Object.keys(branches);

      var sideBlock = document.getElementsByClassName("side-block")[0];
      var heading = document.getElementsByClassName("heading")[0];
      var inStyle = document.getElementById("internal-style");
      var cuStyle = document.getElementById("custom-style");

      // TODO What is this?
      var siteNum = branchIds.length;

      // Get the configuration for the current branch
      // TODO Why is this hardcoded to en?
      var siteLang = "en";
      var siteData = branches[siteLang];

      // Get the Wikidot ID of the current branch
      // TODO When could this fail? Why fallback to false?
      var siteID = siteData ? siteData["id"] : false;

      // Get the page name without category
      var pagename = getQueryString("pagename")
        .replace(/^_default:/, "")
        .replace(new RegExp("^" + siteData["category"]), "");
      // TODO siteData["category"] doesn't have a trailing colon?

      // TODO What is this?
      var shorten = false;

      // TODO What is this?
      var styleType = getQueryString("style");

      // TODO What is this?
      var styleCheck = true;

      // TODO What is this?
      var styleAry = [];

      // TODO What is this, what is it doing, why is it necessary?
      if (59 <= (siteData["category"] + pagename).length) {
        shorten = true;
      }

      // TODO What is happening here?
      // TODO This is the same check that was made for scpBranches vs
      // wlBranches, perhaps they can be consolidated?
      if (styleType == "") {
        styleType =
          pageCategory == "wanderers" || pageCategory == "wanderers-adult"
            ? "wanderers"
            : "default";
      }

      bhlDarkCheck();
      switchStyleType();
      changeStyleCheck();
      getDataAll();
    </script>
    <div id="iframeset"></div>
  </body>
</html>
